sourceSets {
    // adds integration test source set
    intTest {
        java.srcDir "$projectDir/src/intTest/java"
        resources.srcDir "$projectDir/src/intTest/resources"
        compileClasspath += main.output + test.output
        runtimeClasspath += main.output + test.output
    }
}

configurations {
    intTestImplementation.extendsFrom testImplementation
    intTestRuntime.extendsFrom testRuntime
}

// run the intTest/** tests
task intTest(type: Test) {
    description = 'runs int tests'
    group = 'verification'
    testClassesDirs = sourceSets.intTest.output.classesDirs
    classpath = sourceSets.intTest.runtimeClasspath
}

intTest {
    dependsOn test
    useJUnitPlatform()
    testLogging {
        events "started", "failed", "passed", "standard_out"
    }
}
